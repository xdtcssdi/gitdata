<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>用户中心</title>
    <link rel="stylesheet" type="text/css" href="../static/css/iconfont.css"/>
    <link rel="stylesheet" type="text/css" href="../static/css/style.css"/>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>
<div class="header">
    <div class="bar">
        <div class="w1200">
            <span class="l">GitData<font>用户中心</font></span>
            <span class="r"><a href="#"><i class="icon iconfont icon-dianyuan"></i>退出</a></span>
        </div>
    </div>
    <div class="user-info">
        <div class="w1200">
            <div class="user-headface">
                <img src="../static/images/male-130.png"/>
            </div>
            <div class="user-account">
                <p class="tip">下午好，{{ user.username }}</p>
                <p class="account">
                    <span>帐户名：{{ user.username }}</span>
                </p>
            </div>
            <div class="user-modify">
                <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal"
                        style="font-size: 12px">修改个人信息
                </button>
            </div>
        </div>
    </div>
</div>
<div class="main w1200">
    <div class="left">
        <ul>
            <li>
                <a href="#" class="active">
                    <i class="icon iconfont icon-lingdang"></i>消息
                    <span class="badge">42</span></a>
            </li>
            <li>
                <a href="#">
                    <i class="icon iconfont icon-fangzidichan"></i>
                    房源管理
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="icon iconfont icon-wenda"></i>
                    问答
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="icon iconfont icon-icon--"></i>
                    卖房
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="icon iconfont icon-pinglun"></i>
                    评论
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="icon iconfont icon-geren"></i>
                    个人资料
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="icon iconfont icon-jilu"></i>
                    看房记录
                </a>
            </li>
        </ul>
    </div>
    <div class="right">
        <div class="tap">
            <span>系统消息</span>
        </div>
        <div class="container">
            <div class="no-doc">
                <img src="../static/images/no_doc.jpg"/>
                <p>您还没有消息哦~</p>
            </div>
        </div>
    </div>
</div>
</body>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel"><span class="glyphicon glyphicon-pencil">个人信息</span></h4>
            </div>
            <div class="modal-body">
                <div id="username">
                    <span class="glyphicon glyphicon-user"><label style="vertical-align: inherit;">用户名:</label></span>
                    <input type="text" name="uname" id="uname"><br>
                </div>
                <div id="password">
                    <span class="glyphicon glyphicon-lock"><label style="vertical-align: inherit;">原密码:</label></span>
                    <input type="password" name="password" id="password"><br>
                    <span class="glyphicon glyphicon-lock"><label style="vertical-align: inherit;">新密码:</label></span>
                    <input type="password" name="newpassword" id="newpassword"><br>
                </div>
                <div id="email">
                    <span class="glyphicon glyphicon-envelope"><label style="vertical-align: inherit;">&nbsp;&nbsp;&nbsp;邮箱:</label></span>
                    <input type="email" name="email" id="email">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="modifyuserinfo()">提交更改</button>
            </div>
        </div>
    </div>
</div>

<script>

    let modifyuserinfo = function () {
        let username = $("#uname").val();
        let password = $("#password").val();
        let newpassword = $("#newpassword").val();
        let email = $("#email").val();
        let filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if (filter.test(email)) {
            if (username != "" && password != "" && newpassword != "" && email != "") {
                let data = {"username": username, "password": password, "newpassword": newpassword, "email": email};
                $.ajax({
                    url: "",
                    type: "post",
                    data: data,
                    dataType: 'text',

                    success: function (res) {
                        if (res.equal("success")) {

                        }

                    },
                    error: function (res) {

                        if (res.equal("error")) {

                        }

                    }

                })
            }
        }


    }

</script>
</html>